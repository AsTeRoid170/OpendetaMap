<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>GSI Tiles on Leaflet</title>

<link rel="stylesheet"
  href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>

<script
  src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin="">
</script>

<style>
  body { padding: 0; margin: 0; }
  html, body, #map { height: 90%; width: 100%; }
</style>
</head>

<body>

<p>地図 表示</p>

<div id="map"></div>

<script>
/* ===== 地図 ===== */
var map = L.map('map').setView([35.681236, 139.767125], 13);

L.tileLayer(
  'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
  { attribution: '地理院タイル' }
).addTo(map);

/* ===== JSONファイルから駅データを読み込む ===== */
fetch("odpt_Station.json")
  .then(res => res.json())
  .then(data => {

    console.log("駅データ件数:", data.length);
    console.log("最初の1件:", data[0]);

    data.forEach(st => {
      const lat  = st["geo:lat"];
      const lng  = st["geo:long"];
      const name = st["dc:title"];

      if (!lat || !lng) return;

      L.circleMarker([lat, lng], {
        radius: 6,
        color: "red",
        fillColor: "red",
        fillOpacity: 0.8
      })
      .addTo(map)
      .bindPopup(name);
    });
  })
  .catch(err => {
    console.error("JSON読み込みエラー:", err);
  });
</script>

<a href="https://maps.gsi.go.jp/development/ichiran.html" target="_blank">
地理院タイル
</a>

</body>
</html>
